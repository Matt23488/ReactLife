(this.webpackJsonpreactlife=this.webpackJsonpreactlife||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},21:function(e,t,i){"use strict";i.r(t);var n=i(0),s=i.n(n),a=i(12),o=i.n(a),c=(i(17),i(18),i(2)),l=i(3),h=i(7),r=i(6),u=i(10),O=i(4),f=function(){function e(t,i,n,s){Object(c.a)(this,e),this.corner=void 0,this.width=void 0,this.height=void 0,"number"===typeof t?(this.corner={x:t,y:i},this.width=n,this.height=s):(this.corner=t,this.width=i,this.height=n)}return Object(l.a)(e,[{key:"x",get:function(){return this.corner.x}},{key:"y",get:function(){return this.corner.y}}]),e}(),d=i(11),w=i(5),m=function(){function e(t){Object(c.a)(this,e),this._cell=void 0,this._cell=t}return Object(l.a)(e,[{key:"state",get:function(){return 0!==(this._cell&e._statem)}},{key:"nextState",get:function(){return 0!==(this._cell&e._nextm)}},{key:"count",get:function(){return this._cell&e._countm}},{key:"allDead",get:function(){return 0===this._cell}},{key:"makeAlive",value:function(){return new e(this._cell|e._statem)}},{key:"makeDead",value:function(){return new e(this._cell&~e._statem)}},{key:"nextAlive",value:function(){return new e(this._cell|e._nextm)}},{key:"nextDead",value:function(){return new e(this._cell&~e._nextm)}},{key:"increment",value:function(){return new e(this._cell+1)}},{key:"decrement",value:function(){return new e(this._cell-1)}},{key:"clone",value:function(){return new e(this._cell)}}]),e}();m._state=4,m._statem=1<<m._state,m._countm=15,m._next=5,m._nextm=1<<m._next;var _=function(){function e(){Object(c.a)(this,e),this._width=258,this._height=258,this._cells=[],this._changes=[],this.clear()}return Object(l.a)(e,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"clear",value:function(){this._cells=[];for(var e=0;e<this._width;e++){this._cells[e]=[];for(var t=0;t<this._height;t++)this._cells[e][t]=new m(0)}}},{key:"isValidPoint",value:function(e,t){return 0<e&&e<this._width-1&&0<t&&t<this._height-1}},{key:"becomeAlive",value:function(e,t){this._cells[e][t].state||(this._changes.push([e,t]),this._cells[e-1][t-1]=this._cells[e-1][t-1].increment(),this._cells[e-1][t+0]=this._cells[e-1][t+0].increment(),this._cells[e-1][t+1]=this._cells[e-1][t+1].increment(),this._cells[e+0][t-1]=this._cells[e+0][t-1].increment(),this._cells[e+0][t+0]=this._cells[e+0][t+0].makeAlive(),this._cells[e+0][t+1]=this._cells[e+0][t+1].increment(),this._cells[e+1][t-1]=this._cells[e+1][t-1].increment(),this._cells[e+1][t+0]=this._cells[e+1][t+0].increment(),this._cells[e+1][t+1]=this._cells[e+1][t+1].increment())}},{key:"becomeDead",value:function(e,t){this._cells[e][t].state&&(this._changes.push([e,t]),this._cells[e-1][t-1]=this._cells[e-1][t-1].decrement(),this._cells[e-1][t+0]=this._cells[e-1][t+0].decrement(),this._cells[e-1][t+1]=this._cells[e-1][t+1].decrement(),this._cells[e+0][t-1]=this._cells[e+0][t-1].decrement(),this._cells[e+0][t+0]=this._cells[e+0][t+0].makeDead(),this._cells[e+0][t+1]=this._cells[e+0][t+1].decrement(),this._cells[e+1][t-1]=this._cells[e+1][t-1].decrement(),this._cells[e+1][t+0]=this._cells[e+1][t+0].decrement(),this._cells[e+1][t+1]=this._cells[e+1][t+1].decrement())}},{key:"get",value:function(e,t){return!!this.isValidPoint(e,t)&&this._cells[e][t].state}},{key:"set",value:function(e,t,i){this.isValidPoint(e,t)&&(this._cells[e][t].state!==i&&(i?this.becomeAlive(e,t):this.becomeDead(e,t)))}},{key:"step",value:function(){var e,t=[],i=Object(w.a)(this._changes);try{for(i.s();!(e=i.n()).done;)for(var n=Object(d.a)(e.value,2),s=n[0],a=n[1],o=Math.max(s-1,1),c=Math.min(s+2,this._width-1),l=Math.max(a-1,1),h=Math.min(a+2,this._height-1),r=l;r<h;r++)for(var u=o;u<c;u++){var O=this._cells[u][r],f=O.count,m=O.state,_=3===f||2===f&&m;m&&!_?(t.push([u,r]),this._cells[u][r]=O.nextDead()):!m&&_&&(t.push([u,r]),this._cells[u][r]=O.nextAlive())}}catch(k){i.e(k)}finally{i.f()}this._changes=[];for(var p=0,y=t;p<y.length;p++){var v=Object(d.a)(y[p],2),b=v[0],g=v[1];this._cells[b][g].nextState?this.becomeAlive(b,g):this.becomeDead(b,g)}}},{key:"draw",value:function(e,t){for(var i=Math.max(1,e.x),n=Math.min(this._width-1,e.x+e.width),s=Math.max(1,e.y-e.height+1),a=Math.min(this._height-1,e.y+1),o=s;o<a;o++)for(var c=i;c<n;c++)this._cells[c][o].state&&t({x:c,y:o})}}]),e}(),p=function(){function e(t){Object(c.a)(this,e),this._plaintext=void 0,this._plaintext=t}return Object(l.a)(e,[{key:"add",value:function(e,t){var i,n=this._plaintext.split(/\r?\n/).filter((function(e){return!e.startsWith("!")})),s=t.y,a=Object(w.a)(n);try{for(a.s();!(i=a.n()).done;){var o,c=i.value,l=t.x,h=Object(w.a)(c);try{for(h.s();!(o=h.n()).done;){"O"===o.value&&e.set(l,s,!0),l++}}catch(r){h.e(r)}finally{h.f()}s--}}catch(r){a.e(r)}finally{a.f()}}}]),e}(),y=function(){function e(t){Object(c.a)(this,e),this._rle=void 0,this._rle=t}return Object(l.a)(e,[{key:"add",value:function(e,t){var i,n=this._rle.split(/\r?\n/).map((function(e){return e.trim()})).filter((function(e){return!e.startsWith("#")&&!e.startsWith("x")})),s=t.x,a=t.y,o=0,c=Object(w.a)(n);try{for(c.s();!(i=c.n()).done;){var l,h=i.value,r=Object(w.a)(h);try{for(r.s();!(l=r.n()).done;){var u=l.value;switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=10*o+Number(u);break;case"b":s+=Math.max(o,1),o=0;break;case"o":o=Math.max(o,1);for(var O=0;O<o;O++)e.set(s+O,a,!0);s+=o,o=0;break;case"$":a-=Math.max(o,1),s=t.x,o=0;break;case"!":return}}}catch(f){r.e(f)}finally{r.f()}}}catch(f){c.e(f)}finally{c.f()}}}]),e}();function v(e,t,i){if("string"===typeof i){var n=i.split(".");n[n.length-1]}else i.add(e,t)}var b=new p("!Name: Acorn\n!Author: Charles Corderman\n!A methuselah that stabilizes after 5206 generations.\n!www.conwaylife.com/wiki/index.php?title=Acorn\n.O\n...O\nOO..OOO\n"),g=new p("!Name: Beehive\n!Author: John Conway\n!The second most common still life.\n!www.conwaylife.com/wiki/index.php?title=Beehive\n.OO\nO..O\n.OO\n"),k=new p("!Name: Blinker\n!Author: John Conway\n!The smallest and most common oscillator.\n!www.conwaylife.com/wiki/index.php?title=Blinker\nOOO\n"),x=new p("!Name: Block\n!The most common still life.\n!www.conwaylife.com/wiki/index.php?title=Block\nOO\nOO\n"),j=new p("!Name: Boat\n!The only 5-cell still life.\n!www.conwaylife.com/wiki/index.php?title=Boat\nOO\nO.O\n.O\n"),T=new p("!Name: Bookends\n!A still life.\n!www.conwaylife.com/wiki/index.php?title=Bookends\nOO...OO\nO.O.O.O\n..O.O\n.OO.OO\n"),D=new p("!Name: Glider\n!Author: Richard K. Guy\n!The smallest, most common, and first discovered spaceship.\n!www.conwaylife.com/wiki/index.php?title=Glider\n.O\n..O\nOOO\n"),S=new p("!Name: Honey farm\n!A common formation of four beehives.\n!http://www.conwaylife.com/wiki/index.php?title=Honey_farm\n......O\n.....O.O\n.....O.O\n......O\n\n.OO.......OO\nO..O.....O..O\n.OO.......OO\n\n......O\n.....O.O\n.....O.O\n......O\n"),A=new p("\ufeff!Name: HWSS\n!Author: John Conway\n!The fourth most common spaceship (after the glider, lightweight spaceship and middleweight spaceship).\n!http://www.conwaylife.com/wiki/index.php?title=Heavyweight_spaceship\n...OO..\n.O....O\nO......\nO.....O\nOOOOOO."),N=new p("\ufeff!Name: LWSS\n!Author: John Conway\n!The smallest known orthogonally moving spaceship, and the second most common spaceship(after the glider).\n!http://www.conwaylife.com/wiki/index.php?title=Lightweight_spaceship\n.O..O\nO....\nO...O\nOOOO"),P=new p("\ufeff!Name: MWSS\n!Author: John Conway\n!The third most common spaceship (after the glider and lightweight spaceship).\n!http://www.conwaylife.com/wiki/index.php?title=Middleweight_spaceship\n...O..\n.O...O\nO.....\nO....O\nOOOOO."),B=new p("!Name: Pond\n!A still life.\n!www.conwaylife.com/wiki/index.php?title=Pond\n.OO\nO..O\nO..O\n.OO\n"),M=new p("\ufeff!Name: Puffer 1\n!Author: Bill Gosper\n!An orthogonal, period-128 puffer and the first puffer to be discovered\n!http://www.conwaylife.com/wiki/index.php?title=Puffer_1\n.OOO......O.....O......OOO.\nO..O.....OOO...OOO.....O..O\n...O....OO.O...O.OO....O...\n...O...................O...\n...O..O.............O..O...\n...O..OO...........OO..O...\n..O...OO...........OO...O.."),C=new p("\ufeff!Name: Puffer 2\n!Author: Bill Gosper\n!The second puffer to be found.It uses two lightweight spaceships to escort a B-heptomino.\n!http://www.conwaylife.com/wiki/index.php?title=Puffer_2\n.OOO...........OOO\nO..O..........O..O\n...O....OOO......O\n...O....O..O.....O\n..O....O........O."),L=new p("!Name: Pulsar\n!Author: John Conway\n!Despite its size, this is the fourth most common oscillator (and by far the most common of period greater than 2).\n!www.conwaylife.com/wiki/index.php?title=Pulsar\n..OOO...OOO\n\nO....O.O....O\nO....O.O....O\nO....O.O....O\n..OOO...OOO\n\n..OOO...OOO\nO....O.O....O\nO....O.O....O\nO....O.O....O\n\n..OOO...OOO\n"),R=new p("!Name: R-pentomino\n!The most active polyomino with less than six cells; all of the others stabilize in at most 10 generations, but the R-pentomino does not do so until generation 1103, by which time it has a population of 116.\n!www.conwaylife.com/wiki/index.php?title=R-pentomino\n.OO\nOO\n.O\n"),W=new p("!Name: Snake\n!The twenty-first most common still life.\n!http://www.conwaylife.com/wiki/index.php?title=Snake\nOO.O\nO.OO\n"),z=new y("\ufeff#N Spider\n#O David Bell\n#C A c/5 period 5 orthogonal spaceship found in April 1997. It is the \n#C smallest known c/5 spaceship.\n#C http://www.conwaylife.com/wiki/index.php?title=Spider\nx = 27, y = 8, rule = B3/S23\n9bo7bo9b$3b2obobob2o3b2obobob2o3b$3obob3o9b3obob3o$o3bobo5bobo5bobo3bo\n$4b2o6bobo6b2o4b$b2o9bobo9b2ob$b2ob2o15b2ob2ob$5bo15bo!"),E=new p("!Name: Traffic light\n!A common formation of four blinkers.\n!www.conwaylife.com/wiki/index.php?title=Traffic_light\n..OOO\n\nO.....O\nO.....O\nO.....O\n\n..OOO\n"),F=new p("!Name: Tub\n!A very common still life.\n!www.conwaylife.com/wiki/index.php?title=Tub\n.O\nO.O\n.O\n"),H={acorn:b,beehive:g,blinker:k,block:x,boat:j,bookends:T,glider:D,honeyfarm:S,hwss:A,lwss:N,mwss:P,pond:B,puffer1:M,puffer2:C,pulsar:L,rpentomino:R,snake:W,spider:z,trafficlight:E,tub:F},I="#a0c";var U=function(e){Object(h.a)(i,e);var t=Object(r.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,80))._canvas=void 0,n._maxScale=0,n._minScale=-6,n._scale=void 0,n._gridScale=void 0,n._corner=void 0,n._life=void 0,n._dragging=!1,n._dragStart={x:-1,y:-1},n._canvas=document.getElementById(e),n._scale=-1,n._gridScale=-3,n._corner={x:-2,y:n.lifeHeight-2},n._life=new _,v(n._life,{x:129,y:129},C),window.addEventListener("resize",n.onWindowResize.bind(Object(O.a)(n))),n._canvas.addEventListener("wheel",n.onScroll.bind(Object(O.a)(n))),window.addEventListener("keydown",n.onKeyDown.bind(Object(O.a)(n))),n._canvas.addEventListener("mousedown",n.onMouseDown.bind(Object(O.a)(n))),n._canvas.addEventListener("mousemove",n.onMouseMove.bind(Object(O.a)(n))),n._canvas.addEventListener("mouseup",n.onMouseUp.bind(Object(O.a)(n))),n.onWindowResize(),n.draw(),n}return Object(l.a)(i,[{key:"tick",value:function(e){this._life.step()}},{key:"render",value:function(e){this.drawDisplay()}},{key:"onWindowResize",value:function(){this._canvas.width=this._canvas.clientWidth,this._canvas.height=this._canvas.clientHeight,this._corner={x:-2,y:this.lifeHeight-2}}},{key:"onKeyDown",value:function(e){switch(e.key){case"s":this.screenshot();break;case" ":this.running?this.stop():this.start()}}},{key:"onScroll",value:function(e){var t=this.bitmapToLife(e);e.deltaY<0?this.zoomIn(t):e.deltaY>0&&this.zoomOut(t)}},{key:"onMouseDown",value:function(e){this._dragging=!0,this._dragStart=this.bitmapToLife({x:e.clientX,y:e.clientY})}},{key:"onMouseMove",value:function(e){if(this._dragging){var t=this.bitmapToLife({x:e.clientX,y:e.clientY});this._corner={x:this._corner.x+this._dragStart.x-t.x,y:this._corner.y+this._dragStart.y-t.y},this.drawDisplay()}}},{key:"onMouseUp",value:function(e){this._dragging=!1}},{key:"draw",value:function(){this.drawDisplay()}},{key:"clearDisplay",value:function(){var e=this.ctx,t=this.width,i=this.height;e.fillStyle="#333",e.fillRect(0,0,t,i)}},{key:"drawDisplay",value:function(){this.clearDisplay(),this._scale<0?this.drawBlocks():this.drawPixels()}},{key:"drawGrid",value:function(){if(this.gridEnabled){var e=this.ctx,t=this.width,i=this.height;e.strokeStyle="#000",e.beginPath();for(var n=0;n<t;n+=1<<-this._scale)e.moveTo(n,0),e.lineTo(n,i-1);for(var s=0;s<i;s+=1<<-this._scale)e.moveTo(0,s),e.lineTo(t-1,s);e.closePath(),e.stroke()}}},{key:"drawBlocks",value:function(){var e=this,t=this.ctx;t.fillStyle=I;this._life.draw(this.lifeRect,(function(i){var n=e.lifeToBitmap(i);e.isValidBitmapPoint(n)&&t.fillRect(n.x,n.y,1<<-e._scale,1<<-e._scale)})),this.drawGrid()}},{key:"drawPixels",value:function(){var e=this,t=this.ctx,i=this.width,n=this.height,s=t.getImageData(0,0,i,n),a=function(e){var t=e.slice(1),i=[];if(3===t.length)for(var n=0;n<3;n++)i.push(Number("0x".concat(t.charAt(n).repeat(2))));else for(var s=0;s<6;s+=2)i.push(Number("0x".concat(t.slice(s,s+2))));return i}(I);this._life.draw(this.lifeRect,(function(t){var n=e.lifeToBitmap(t);s.data[n.y*i*4+4*n.x+0]=a[0],s.data[n.y*i*4+4*n.x+1]=a[1],s.data[n.y*i*4+4*n.x+2]=a[2],s.data[n.y*i*4+4*n.x+3]=255})),t.putImageData(s,0,0)}},{key:"screenshot",value:function(){var e=this._canvas.toDataURL("image/png").replace(/^data:image\/[^;]/,"data:application/octet-stream"),t=document.createElement("a");t.setAttribute("download","Life.png"),t.setAttribute("href",e),t.click()}},{key:"zoomOut",value:function(e){this._scale<this._maxScale&&(this._corner={x:2*this._corner.x-e.x,y:2*this._corner.y-e.y},this._scale++,this.drawDisplay())}},{key:"zoomIn",value:function(e){this._scale>this._minScale&&(this._corner={x:Math.floor((this._corner.x+e.x)/2),y:Math.floor((this._corner.y+e.y)/2)},this._scale--,this.drawDisplay())}},{key:"canvas",get:function(){return this._canvas}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"gridScale",get:function(){return this._gridScale}},{key:"corner",get:function(){return this._corner},set:function(e){this._corner=e}},{key:"life",get:function(){return this._life}},{key:"ctx",get:function(){return this._canvas.getContext("2d")}},{key:"width",get:function(){return this._canvas.width}},{key:"height",get:function(){return this._canvas.height}},{key:"pattern",set:function(e){this._life.clear(),v(this._life,{x:this._life.width/2,y:this._life.height/2},e),this.draw()}},{key:"scaleUp",value:function(e){return this._scale>=0?e<<this._scale:e>>-this._scale}},{key:"scaleDown",value:function(e){return this._scale>=0?e>>this._scale:e<<-this._scale}},{key:"lifeWidth",get:function(){return this.scaleUp(this._canvas.width)}},{key:"lifeHeight",get:function(){return this.scaleUp(this._canvas.height)}},{key:"lifeRect",get:function(){return new f(this._corner,this.lifeWidth,this.lifeHeight)}},{key:"lifeToBitmap",value:function(e){return{x:this.scaleDown(e.x-this._corner.x),y:this.scaleDown(this._corner.y-e.y)}}},{key:"bitmapToLife",value:function(e){return{x:this._corner.x+this.scaleUp(e.x),y:this._corner.y-this.scaleUp(e.y)}}},{key:"gridEnabled",get:function(){return this._scale<=this._gridScale}},{key:"isValidBitmapPoint",value:function(e){return 0<=e.x&&e.x<this._canvas.width&&0<=e.y&&e.y<this._canvas.height}}]),i}(function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(c.a)(this,e),this._targetFPS=void 0,this._limitTick=void 0,this._lastRenderTime=0,this._lastTickTime=0,this._doLoop=!1,this._targetFPS=t,this._limitTick=i}return Object(l.a)(e,[{key:"loop",value:function(e){var t=e-this._lastRenderTime,i=e-this._lastTickTime;this._limitTick||(this.tick(i),this._lastTickTime=e),t>=1e3/this._targetFPS&&(this._limitTick&&(this.tick(i),this._lastTickTime=e),this.render(t),this._lastRenderTime=e),this._doLoop&&window.requestAnimationFrame(this.loop.bind(this))}},{key:"running",get:function(){return this._doLoop}},{key:"start",value:function(){this._doLoop=!0,window.requestAnimationFrame(this.loop.bind(this))}},{key:"stop",value:function(){this._doLoop=!1}}]),e}()),J=(i(19),i(1)),$=function(e){Object(h.a)(i,e);var t=Object(r.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).state={selectedPattern:"puffer2"},n}return Object(l.a)(i,[{key:"onPatternChange",value:function(e){this.state.lifeData&&(this.state.lifeData.running&&this.state.lifeData.stop(),this.state.lifeData.pattern=H[e.target.value],this.setState({selectedPattern:e.target.value}))}},{key:"onToggleRunning",value:function(){this.state.lifeData&&(this.state.lifeData.running?this.state.lifeData.stop():this.state.lifeData.start())}},{key:"componentDidMount",value:function(){var e=new U("lifeCanvas");this.setState({lifeData:e})}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.state.lifeData)||void 0===e||e.stop()}},{key:"render",value:function(){return Object(J.jsxs)("div",{className:"Life",children:[Object(J.jsx)("canvas",{className:"LifeCanvas",id:"lifeCanvas"}),Object(J.jsxs)("div",{className:"LifeControls",children:[Object(J.jsx)("select",{value:this.state.selectedPattern,onChange:this.onPatternChange.bind(this),children:Object.keys(H).map((function(e){return Object(J.jsx)("option",{value:e,children:e},e)}))}),Object(J.jsxs)("button",{onClick:this.onToggleRunning.bind(this),children:[Object(J.jsx)(u.b,{}),Object(J.jsx)(u.a,{})]})]})]})}}]),i}(s.a.Component);var G=function(){return Object(J.jsx)("div",{className:"App",children:Object(J.jsx)($,{})})},V=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,22)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;i(e),n(e),s(e),a(e),o(e)}))};o.a.render(Object(J.jsx)(s.a.StrictMode,{children:Object(J.jsx)(G,{})}),document.getElementById("root")),V()}},[[21,1,2]]]);
//# sourceMappingURL=main.3751bc7f.chunk.js.map