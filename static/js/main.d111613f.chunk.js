(this.webpackJsonpreactlife=this.webpackJsonpreactlife||[]).push([[0],[,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(1),s=n.n(i),r=n(12),o=n.n(r),a=(n(17),n(18),n(3)),h=n(4),c=n(8),l=n(7),u=n(5),O=(n(19),n(0));function f(t){return Object(O.jsx)("button",{className:"Button ".concat(t.className||""),style:t.style,onClick:t.onClick,children:t.children})}var _=n(2),p=function(){function t(e,n,i,s){Object(a.a)(this,t),this.corner=void 0,this.width=void 0,this.height=void 0,"number"===typeof e?(this.corner={x:e,y:n},this.width=i,this.height=s):(this.corner=e,this.width=n,this.height=i)}return Object(h.a)(t,[{key:"x",get:function(){return this.corner.x}},{key:"y",get:function(){return this.corner.y}}]),t}(),d=n(11),m=n(6),w=function(){function t(e){Object(a.a)(this,t),this._triplet=void 0,this._triplet=e}return Object(h.a)(t,[{key:"leftNext",get:function(){return 0!==(t._lnm&this._triplet)}},{key:"middleNext",get:function(){return 0!==(t._mnm&this._triplet)}},{key:"rightNext",get:function(){return 0!==(t._rnm&this._triplet)}},{key:"leftNextRaw",get:function(){return(this._triplet&t._lnm)>>t._lnext}},{key:"middleNextRaw",get:function(){return(this._triplet&t._mnm)>>t._mnext}},{key:"rightNextRaw",get:function(){return(this._triplet&t._rnm)>>t._rnext}},{key:"setLeftNext",value:function(e){return new t(e?t._lnm|this._triplet:~t._lnm&this._triplet)}},{key:"setMiddleNext",value:function(e){return new t(e?t._mnm|this._triplet:~t._mnm&this._triplet)}},{key:"setRightNext",value:function(e){return new t(e?t._rnm|this._triplet:~t._rnm&this._triplet)}},{key:"leftCurrent",get:function(){return 0!==(t._lcm&this._triplet)}},{key:"middleCurrent",get:function(){return 0!==(t._mcm&this._triplet)}},{key:"rightCurrent",get:function(){return 0!==(t._rcm&this._triplet)}},{key:"leftCurrentRaw",get:function(){return(this._triplet&t._lcm)>>t._lcur}},{key:"middleCurrentRaw",get:function(){return(this._triplet&t._mcm)>>t._mcur}},{key:"rightCurrentRaw",get:function(){return(this._triplet&t._rcm)>>t._rcur}},{key:"setLeftCurrent",value:function(e){return new t(e?t._lcm|this._triplet:~t._lcm&this._triplet)}},{key:"setMiddleCurrent",value:function(e){return new t(e?t._mcm|this._triplet:~t._mcm&this._triplet)}},{key:"setRightCurrent",value:function(e){return new t(e?t._rcm|this._triplet:~t._rcm&this._triplet)}},{key:"leftCountRaw",get:function(){return(t._lcountm&this._triplet)>>t._lcount}},{key:"middleCountRaw",get:function(){return(t._mcountm&this._triplet)>>t._mcount}},{key:"rightCountRaw",get:function(){return(t._rcountm&this._triplet)>>t._rcount}},{key:"leftCount",get:function(){return this.middleCurrentRaw+this.leftCountRaw}},{key:"middleCount",get:function(){return this.middleCountRaw+this.leftCurrentRaw+this.rightCurrentRaw}},{key:"rightCount",get:function(){return this.middleCurrentRaw+this.rightCountRaw}},{key:"setLeftCountRaw",value:function(e){return new t(e<<t._lcount|~t._lcountm&this._triplet)}},{key:"setMiddleCountRaw",value:function(e){return new t(e<<t._mcount|~t._mcountm&this._triplet)}},{key:"setRightCountRaw",value:function(e){return new t(e<<t._rcount|~t._rcountm&this._triplet)}},{key:"uup",get:function(){return new t(t._rcountone+this._triplet)}},{key:"uum",get:function(){return new t(-t._rcountone+this._triplet)}},{key:"upu",get:function(){return new t(t._mcountone+this._triplet)}},{key:"upp",get:function(){return new t(t._mcountone+t._rcountone+this._triplet)}},{key:"umu",get:function(){return new t(-t._mcountone+this._triplet)}},{key:"umm",get:function(){return new t(-t._mcountone-t._rcountone+this._triplet)}},{key:"puu",get:function(){return new t(t._lcountone+this._triplet)}},{key:"pum",get:function(){return new t(t._lcountone-t._rcountone+this._triplet)}},{key:"ppu",get:function(){return new t(t._lcountone+t._mcountone+this._triplet)}},{key:"ppp",get:function(){return new t(t._lcountone+t._mcountone+t._rcountone+this._triplet)}},{key:"muu",get:function(){return new t(-t._lcountone+this._triplet)}},{key:"mup",get:function(){return new t(-t._lcountone+t._rcountone+this._triplet)}},{key:"mmu",get:function(){return new t(-t._lcountone-t._mcountone+this._triplet)}},{key:"mmm",get:function(){return new t(-t._lcountone-t._mcountone-t._rcountone+this._triplet)}},{key:"currentState",get:function(){return(t._currentm&this._triplet)>>t._rcur}},{key:"nextState",get:function(){return(t._nextm&this._triplet)>>t._rnext}},{key:"changed",get:function(){return this.currentState!==this.nextState}}]),t}();w._lnext=14,w._mnext=13,w._rnext=12,w._lcur=11,w._mcur=10,w._rcur=9,w._lcount=6,w._mcount=3,w._rcount=0,w._lnm=1<<w._lnext,w._mnm=1<<w._mnext,w._rnm=1<<w._rnext,w._lcm=1<<w._lcur,w._mcm=1<<w._mcur,w._rcm=1<<w._rcur,w._lcountm=7<<w._lcount,w._mcountm=7<<w._mcount,w._rcountm=7<<w._rcount,w._lcountone=1<<w._lcount,w._mcountone=1<<w._mcount,w._rcountone=1<<w._rcount,w._currentm=w._lcm|w._mcm|w._rcm,w._nextm=w._lnm|w._mnm|w._rnm;var v=function(){function t(){Object(a.a)(this,t),this._width=342,this._height=1026,this._triplets=[],this._changes=[],this.clear()}return Object(h.a)(t,[{key:"clear",value:function(){this._triplets=[],this._changes=[];for(var t=0;t<this._width;t++){this._triplets[t]=[];for(var e=0;e<this._height;e++)this._triplets[t][e]=new w(0)}}},{key:"width",get:function(){return 3*this._width}},{key:"height",get:function(){return this._height}},{key:"isValidPoint",value:function(t,e){return 1<=t&&t<3*(this._width-1)&&1<=e&&e<this._height-1}},{key:"becomeAlive",value:function(t,e){var n=Math.floor(t/3),i=this._triplets[n][e];switch(t%3){case 0:if(i.leftCurrent)return!1;this._triplets[n-1][e-1]=this._triplets[n-1][e-1].uup,this._triplets[n][e-1]=this._triplets[n][e-1].ppu,this._triplets[n-1][e]=this._triplets[n-1][e].uup,this._triplets[n][e]=i.setLeftCurrent(!0),this._triplets[n-1][e+1]=this._triplets[n-1][e+1].uup,this._triplets[n][e+1]=this._triplets[n][e+1].ppu;break;case 1:if(i.middleCurrent)return!1;this._triplets[n][e-1]=this._triplets[n][e-1].ppp,this._triplets[n][e]=i.setMiddleCurrent(!0),this._triplets[n][e+1]=this._triplets[n][e+1].ppp;break;case 2:if(i.rightCurrent)return!1;this._triplets[n][e-1]=this._triplets[n][e-1].upp,this._triplets[n+1][e-1]=this._triplets[n+1][e-1].puu,this._triplets[n][e]=i.setRightCurrent(!0),this._triplets[n+1][e]=this._triplets[n+1][e].puu,this._triplets[n][e+1]=this._triplets[n][e+1].upp,this._triplets[n+1][e+1]=this._triplets[n+1][e+1].puu}return!0}},{key:"becomeDead",value:function(t,e){var n=Math.floor(t/3),i=this._triplets[n][e];switch(t%3){case 0:if(!i.leftCurrent)return!1;this._triplets[n-1][e-1]=this._triplets[n-1][e-1].uum,this._triplets[n][e-1]=this._triplets[n][e-1].mmu,this._triplets[n-1][e]=this._triplets[n-1][e].uum,this._triplets[n][e]=i.setLeftCurrent(!1),this._triplets[n-1][e+1]=this._triplets[n-1][e+1].uum,this._triplets[n][e+1]=this._triplets[n][e+1].mmu;break;case 1:if(!i.middleCurrent)return!1;this._triplets[n][e-1]=this._triplets[n][e-1].mmm,this._triplets[n][e]=i.setMiddleCurrent(!1),this._triplets[n][e+1]=this._triplets[n][e+1].mmm;break;case 2:if(!i.rightCurrent)return!1;this._triplets[n][e-1]=this._triplets[n][e-1].umm,this._triplets[n+1][e-1]=this._triplets[n+1][e-1].muu,this._triplets[n][e]=i.setRightCurrent(!1),this._triplets[n+1][e]=this._triplets[n+1][e].muu,this._triplets[n][e+1]=this._triplets[n][e+1].umm,this._triplets[n+1][e+1]=this._triplets[n+1][e+1].muu}return!0}},{key:"get",value:function(t,e){if(!this.isValidPoint(t,e))return!1;var n=this._triplets[Math.floor(t/3)][e];switch(t%3){case 0:return n.leftCurrent;case 1:return n.middleCurrent;case 2:return n.rightCurrent}return!1}},{key:"set",value:function(t,e,n){this.isValidPoint(t,e)&&(n?this.becomeAlive(t,e)&&this._changes.push([Math.floor(t/3),e]):this.becomeDead(t,e)&&this._changes.push([Math.floor(t/3),e]))}},{key:"step",value:function(){var t,e=[],n=Object(m.a)(this._changes);try{for(n.s();!(t=n.n()).done;)for(var i=Object(d.a)(t.value,2),s=i[0],r=i[1],o=Math.max(s-1,1),a=Math.min(s+2,this._width-1),h=Math.max(r-1,1),c=Math.min(r+2,this._height-1),l=h;l<c;l++)for(var u=o;u<a;u++){var O=this._triplets[u][l],f=O.leftCount,_=O.middleCount,p=O.rightCount;(O=(O=(O=O.setLeftNext(3===f||O.leftCurrent&&2===f)).setMiddleNext(3===_||O.middleCurrent&&2===_)).setRightNext(3===p||O.rightCurrent&&2===p)).changed&&(e.push([u,l]),this._triplets[u][l]=O)}}catch(x){n.e(x)}finally{n.f()}this._changes=[];for(var w=0,v=e;w<v.length;w++){var y=Object(d.a)(v[w],2),g=y[0],b=y[1],k=this._triplets[g][b];k.changed&&(k.leftNext?this.becomeAlive(3*g,b):this.becomeDead(3*g,b),k.middleNext?this.becomeAlive(3*g+1,b):this.becomeDead(3*g+1,b),k.rightNext?this.becomeAlive(3*g+2,b):this.becomeDead(3*g+2,b),this._changes.push([g,b]))}}},{key:"draw",value:function(t,e){for(var n=Math.max(0,t.x),i=Math.min(3*this._width,t.x+t.width),s=Math.max(0,t.y-t.height+1),r=Math.min(this._height,t.y+1),o=s;o<r;o++)for(var a=n;a<i;a++)this.get(a,o)&&e({x:a,y:o})}}]),t}(),y=function(){function t(e){Object(a.a)(this,t),this._tickTime=void 0,this.renderTime=void 0,this._doLoop=!1,this._tickLoopHandle=0,this._lastRenderTime=0,this._tickTime=e,this.renderTime=100/6}return Object(h.a)(t,[{key:"tickTime",set:function(t){this._tickTime=t,this.running&&(window.clearInterval(this._tickLoopHandle),this._tickLoopHandle=window.setInterval(this.tickLoop.bind(this),this._tickTime))}},{key:"running",get:function(){return this._doLoop}},{key:"tickLoop",value:function(t){this.tick()}},{key:"renderLoop",value:function(t){var e=t-this._lastRenderTime;e>=this.renderTime&&(this.render(e),this._lastRenderTime=t),this._doLoop&&window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"start",value:function(){console.log(this._tickTime),this._doLoop=!0,window.requestAnimationFrame(this.renderLoop.bind(this)),this._tickLoopHandle=window.setInterval(this.tickLoop.bind(this),this._tickTime)}},{key:"stop",value:function(){this._doLoop=!1,window.clearInterval(this._tickLoopHandle)}}]),t}(),g=function(){function t(e){Object(a.a)(this,t),this._plaintext=void 0,this._plaintext=e}return Object(h.a)(t,[{key:"add",value:function(t,e){var n,i=this._plaintext.split(/\r?\n/).filter((function(t){return!t.startsWith("!")})),s=e.y,r=Object(m.a)(i);try{for(r.s();!(n=r.n()).done;){var o,a=n.value,h=e.x,c=Object(m.a)(a);try{for(c.s();!(o=c.n()).done;){"O"===o.value&&t.set(h,s,!0),h++}}catch(l){c.e(l)}finally{c.f()}s--}}catch(l){r.e(l)}finally{r.f()}}}]),t}(),b=function(){function t(e){Object(a.a)(this,t),this._rle=void 0,this._rle=e}return Object(h.a)(t,[{key:"add",value:function(t,e){var n,i=this._rle.split(/\r?\n/).map((function(t){return t.trim()})).filter((function(t){return!t.startsWith("#")&&!t.startsWith("x")})),s=e.x,r=e.y,o=0,a=Object(m.a)(i);try{for(a.s();!(n=a.n()).done;){var h,c=n.value,l=Object(m.a)(c);try{for(l.s();!(h=l.n()).done;){var u=h.value;switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=10*o+Number(u);break;case"b":s+=Math.max(o,1),o=0;break;case"o":o=Math.max(o,1);for(var O=0;O<o;O++)t.set(s+O,r,!0);s+=o,o=0;break;case"$":r-=Math.max(o,1),s=e.x,o=0;break;case"!":return}}}catch(f){l.e(f)}finally{l.f()}}}catch(f){a.e(f)}finally{a.f()}}}]),t}(),k={acorn:new g("!Name: Acorn\n!Author: Charles Corderman\n!A methuselah that stabilizes after 5206 generations.\n!www.conwaylife.com/wiki/index.php?title=Acorn\n.O\n...O\nOO..OOO\n"),ak94:new g("! AK-94\n! Mike Playle\n! The smallest known true p94 gun, found in May 2013.\n! www.conwaylife.com/wiki/AK-94\n...............O.......OO.............\n...............OOO.....OO.............\n..................O...................\n.................OO................OO.\n..............................OO..O..O\n..............................O.O..OO.\n.................................OO...\n.....O............................O...\n.....OOO..........................O.OO\n........O......................OO.O..O\n.......OO......................OO.OO..\n......................................\n......................................\n.................O....................\n..OO.OO.........O.O..........OO.......\nO..O.OO........O...O.........O........\nOO.O...........O...O..........OOO.....\n...O...........O...O............O.....\n...OO...........O.O...................\n.OO..O.O.........O....................\nO..O..OO..............................\n.OO................OO.................\n...................O..................\n.............OO.....OOO...............\n.............OO.......O..............."),beehive:new g("!Name: Beehive\n!Author: John Conway\n!The second most common still life.\n!www.conwaylife.com/wiki/index.php?title=Beehive\n.OO\nO..O\n.OO\n"),blinker:new g("!Name: Blinker\n!Author: John Conway\n!The smallest and most common oscillator.\n!www.conwaylife.com/wiki/index.php?title=Blinker\nOOO\n"),block:new g("!Name: Block\n!The most common still life.\n!www.conwaylife.com/wiki/index.php?title=Block\nOO\nOO\n"),boat:new g("!Name: Boat\n!The only 5-cell still life.\n!www.conwaylife.com/wiki/index.php?title=Boat\nOO\nO.O\n.O\n"),bookends:new g("!Name: Bookends\n!A still life.\n!www.conwaylife.com/wiki/index.php?title=Bookends\nOO...OO\nO.O.O.O\n..O.O\n.OO.OO\n"),canadagoose:new g("!Name: Canada goose\n!Author: Jason Summers\n!Canada goose consists of a glider plus a tagalong. At the time of its discovery, the Canada goose was the smallest known diagonal spaceship other than the glider, but this record has since been beaten, first by Orion 2, and more recently by the crab.\n!www.conwaylife.com/wiki/index.php?title=Canada_goose\nOOO\nO.........OO\n.O......OOO.O\n...OO..OO\n....O\n........O\n....OO...O\n...O.O.OO\n...O.O..O.OO\n..O....OO\n..OO\n..OO\n"),eater1:new g("!Name: Eater 1\n!Author: Bill Gosper\n!The first discovered eater.\n!http://www.conwaylife.com/wiki/index.php?title=Eater_1\nOO\nO.O\n..O\n..OO\n"),glider:new g("!Name: Glider\n!Author: Richard K. Guy\n!The smallest, most common, and first discovered spaceship.\n!www.conwaylife.com/wiki/index.php?title=Glider\n.O\n..O\nOOO\n"),gosperglidergun:new g("!Name: Gosper glider gun\n!Author: Bill Gosper\n!The first known gun and the first known finite pattern with unbounded growth.\n!www.conwaylife.com/wiki/index.php?title=Gosper_glider_gun\n........................O\n......................O.O\n............OO......OO............OO\n...........O...O....OO............OO\nOO........O.....O...OO\nOO........O...O.OO....O.O\n..........O.....O.......O\n...........O...O\n............OO\n"),honeyfarm:new g("!Name: Honey farm\n!A common formation of four beehives.\n!http://www.conwaylife.com/wiki/index.php?title=Honey_farm\n......O\n.....O.O\n.....O.O\n......O\n\n.OO.......OO\nO..O.....O..O\n.OO.......OO\n\n......O\n.....O.O\n.....O.O\n......O\n"),hwss:new g("\ufeff!Name: HWSS\n!Author: John Conway\n!The fourth most common spaceship (after the glider, lightweight spaceship and middleweight spaceship).\n!http://www.conwaylife.com/wiki/index.php?title=Heavyweight_spaceship\n...OO..\n.O....O\nO......\nO.....O\nOOOOOO."),lwss:new g("\ufeff!Name: LWSS\n!Author: John Conway\n!The smallest known orthogonally moving spaceship, and the second most common spaceship(after the glider).\n!http://www.conwaylife.com/wiki/index.php?title=Lightweight_spaceship\n.O..O\nO....\nO...O\nOOOO"),mwss:new g("\ufeff!Name: MWSS\n!Author: John Conway\n!The third most common spaceship (after the glider and lightweight spaceship).\n!http://www.conwaylife.com/wiki/index.php?title=Middleweight_spaceship\n...O..\n.O...O\nO.....\nO....O\nOOOOO."),pond:new g("!Name: Pond\n!A still life.\n!www.conwaylife.com/wiki/index.php?title=Pond\n.OO\nO..O\nO..O\n.OO\n"),puffer1:new g("\ufeff!Name: Puffer 1\n!Author: Bill Gosper\n!An orthogonal, period-128 puffer and the first puffer to be discovered\n!http://www.conwaylife.com/wiki/index.php?title=Puffer_1\n.OOO......O.....O......OOO.\nO..O.....OOO...OOO.....O..O\n...O....OO.O...O.OO....O...\n...O...................O...\n...O..O.............O..O...\n...O..OO...........OO..O...\n..O...OO...........OO...O.."),puffer2:new g("\ufeff!Name: Puffer 2\n!Author: Bill Gosper\n!The second puffer to be found.It uses two lightweight spaceships to escort a B-heptomino.\n!http://www.conwaylife.com/wiki/index.php?title=Puffer_2\n.OOO...........OOO\nO..O..........O..O\n...O....OOO......O\n...O....O..O.....O\n..O....O........O."),pulsar:new g("!Name: Pulsar\n!Author: John Conway\n!Despite its size, this is the fourth most common oscillator (and by far the most common of period greater than 2).\n!www.conwaylife.com/wiki/index.php?title=Pulsar\n..OOO...OOO\n\nO....O.O....O\nO....O.O....O\nO....O.O....O\n..OOO...OOO\n\n..OOO...OOO\nO....O.O....O\nO....O.O....O\nO....O.O....O\n\n..OOO...OOO\n"),queenbee:new g("!Name: Queen bee\n!A pattern that lays a beehive on either side of itself before exploding.\n!www.conwaylife.com/wiki/index.php?title=Queen_bee\n...O\n..O.O\n.O...O\n..OOO\nOO...OO\n"),queenbeeshuttle:new g("!Name: Queen bee shuttle\n!Author: Bill Gosper\n!A period 30 oscillator.\n!www.conwaylife.com/wiki/index.php?title=Queen_bee_shuttle\n.........O\n.......O.O\n......O.O\nOO...O..O...........OO\nOO....O.O...........OO\n.......O.O\n.........O\n"),rpentomino:new g("!Name: R-pentomino\n!The most active polyomino with less than six cells; all of the others stabilize in at most 10 generations, but the R-pentomino does not do so until generation 1103, by which time it has a population of 116.\n!www.conwaylife.com/wiki/index.php?title=R-pentomino\n.OO\nOO\n.O\n"),snake:new g("!Name: Snake\n!The twenty-first most common still life.\n!http://www.conwaylife.com/wiki/index.php?title=Snake\nOO.O\nO.OO\n"),spider:new b("\ufeff#N Spider\n#O David Bell\n#C A c/5 period 5 orthogonal spaceship found in April 1997. It is the \n#C smallest known c/5 spaceship.\n#C http://www.conwaylife.com/wiki/index.php?title=Spider\nx = 27, y = 8, rule = B3/S23\n9bo7bo9b$3b2obobob2o3b2obobob2o3b$3obob3o9b3obob3o$o3bobo5bobo5bobo3bo\n$4b2o6bobo6b2o4b$b2o9bobo9b2ob$b2ob2o15b2ob2ob$5bo15bo!"),trafficlight:new g("!Name: Traffic light\n!A common formation of four blinkers.\n!www.conwaylife.com/wiki/index.php?title=Traffic_light\n..OOO\n\nO.....O\nO.....O\nO.....O\n\n..OOO\n"),tub:new g("!Name: Tub\n!A very common still life.\n!www.conwaylife.com/wiki/index.php?title=Tub\n.O\nO.O\n.O\n")},x="#a0c";var C=function(t){Object(c.a)(n,t);var e=Object(l.a)(n);function n(t,i){var s;return Object(a.a)(this,n),(s=e.call(this,i))._canvas=void 0,s._maxScale=0,s._minScale=-6,s._scale=void 0,s._gridScale=void 0,s._corner=void 0,s._life=void 0,s._dragging=!1,s._dragStart={x:-1,y:-1},s._evCache=[],s._prevDiff=-1,s._canvas=document.getElementById(t),s._scale=-1,s._gridScale=-3,s._corner={x:-2,y:s.lifeHeight-2},s._life=new v,s.pattern=k.puffer2,window.addEventListener("resize",s.onWindowResize.bind(Object(_.a)(s))),s._canvas.addEventListener("wheel",s.onScroll.bind(Object(_.a)(s))),window.addEventListener("keydown",s.onKeyDown.bind(Object(_.a)(s))),s._canvas.addEventListener("mousedown",s.onMouseDown.bind(Object(_.a)(s))),s._canvas.addEventListener("mousemove",s.onMouseMove.bind(Object(_.a)(s))),s._canvas.addEventListener("mouseup",s.onMouseUp.bind(Object(_.a)(s))),s._canvas.addEventListener("touchstart",s.onTouchStart.bind(Object(_.a)(s))),s._canvas.addEventListener("touchmove",s.onTouchMove.bind(Object(_.a)(s))),s._canvas.addEventListener("touchend",s.onTouchEnd.bind(Object(_.a)(s))),s._canvas.addEventListener("pointerdown",s.onPointerDown.bind(Object(_.a)(s))),s._canvas.addEventListener("pointermove",s.onPointerMove.bind(Object(_.a)(s))),s._canvas.addEventListener("pointerup",s.onPointerUp.bind(Object(_.a)(s))),s._canvas.addEventListener("pointercancel",s.onPointerUp.bind(Object(_.a)(s))),s._canvas.addEventListener("pointerout",s.onPointerUp.bind(Object(_.a)(s))),s._canvas.addEventListener("pointerleave",s.onPointerUp.bind(Object(_.a)(s))),s.onWindowResize(),s.draw(),s}return Object(h.a)(n,[{key:"step",value:function(){this.running||(this._life.step(),this.draw())}},{key:"tick",value:function(){this._life.step()}},{key:"render",value:function(t){this.drawDisplay()}},{key:"onWindowResize",value:function(){this._canvas.width=this._canvas.clientWidth,this._canvas.height=this._canvas.clientHeight,this._corner={x:Math.floor(this._life.width/2)-Math.floor(this.lifeWidth/2),y:Math.floor(this._life.height/2)+Math.floor(this.lifeHeight/2)},this.running||this.draw()}},{key:"onKeyDown",value:function(t){switch(t.key){case"s":this.screenshot();break;case" ":this.running?this.stop():this.start()}}},{key:"onScroll",value:function(t){var e=this.bitmapToLife(t);t.deltaY<0?this.zoomIn(e):t.deltaY>0&&this.zoomOut(e)}},{key:"onMouseDown",value:function(t){this._dragging=!0,this._dragStart=this.bitmapToLife({x:t.clientX,y:t.clientY})}},{key:"onTouchStart",value:function(t){1===t.touches.length&&(t.preventDefault(),this._dragging=!0,this._dragStart=this.bitmapToLife({x:t.touches[0].clientX,y:t.touches[0].clientY}))}},{key:"onMouseMove",value:function(t){if(this._dragging){var e=this.bitmapToLife({x:t.clientX,y:t.clientY});this._corner={x:this._corner.x+this._dragStart.x-e.x,y:this._corner.y+this._dragStart.y-e.y},this.drawDisplay()}}},{key:"onTouchMove",value:function(t){if(this._dragging){t.preventDefault();var e=this.bitmapToLife({x:t.touches[0].clientX,y:t.touches[0].clientY});this._corner={x:this._corner.x+this._dragStart.x-e.x,y:this._corner.y+this._dragStart.y-e.y},this.drawDisplay()}}},{key:"onMouseUp",value:function(t){this._dragging=!1}},{key:"onTouchEnd",value:function(t){1===t.touches.length&&(t.preventDefault(),this._dragging=!1)}},{key:"onPointerDown",value:function(t){this._evCache.push(t)}},{key:"onPointerMove",value:function(t){for(var e=0;e<this._evCache.length;e++)if(t.pointerId===this._evCache[e].pointerId){this._evCache[e]=t;break}if(2===this._evCache.length){var n=Math.sqrt(Math.pow(this._evCache[0].clientX-this._evCache[1].clientX,2)+Math.pow(this._evCache[0].clientY-this._evCache[1].clientY,2));Math.abs(n-this._prevDiff)>50&&(n>this._prevDiff?this.zoomIn({x:Math.floor((this._evCache[0].clientX+this._evCache[1].clientX)/2),y:Math.floor((this._evCache[0].clientY+this._evCache[1].clientY)/2)}):n<this._prevDiff&&this.zoomOut({x:Math.floor((this._evCache[0].clientX+this._evCache[1].clientX)/2),y:Math.floor((this._evCache[0].clientY+this._evCache[1].clientY)/2)}),this._prevDiff=n)}}},{key:"onPointerUp",value:function(t){this.removeEvent(t),this._evCache.length<2&&(this._prevDiff=-1)}},{key:"removeEvent",value:function(t){for(var e=0;e<this._evCache.length;e++)if(this._evCache[e].pointerId===t.pointerId){this._evCache.splice(e,1);break}}},{key:"draw",value:function(){this.drawDisplay()}},{key:"clearDisplay",value:function(){var t=this.ctx,e=this.width,n=this.height;t.fillStyle="#333",t.fillRect(0,0,e,n)}},{key:"drawDisplay",value:function(){this.clearDisplay(),this._scale<0?this.drawBlocks():this.drawPixels()}},{key:"drawGrid",value:function(){if(this.gridEnabled){var t=this.ctx,e=this.width,n=this.height;t.strokeStyle="#000",t.beginPath();for(var i=0;i<e;i+=1<<-this._scale)t.moveTo(i,0),t.lineTo(i,n-1);for(var s=0;s<n;s+=1<<-this._scale)t.moveTo(0,s),t.lineTo(e-1,s);t.closePath(),t.stroke()}}},{key:"drawBlocks",value:function(){var t=this,e=this.ctx;e.fillStyle=x;this._life.draw(this.lifeRect,(function(n){var i=t.lifeToBitmap(n);t.isValidBitmapPoint(i)&&e.fillRect(i.x,i.y,1<<-t._scale,1<<-t._scale)})),this.drawGrid()}},{key:"drawPixels",value:function(){var t=this,e=this.ctx,n=this.width,i=this.height,s=e.getImageData(0,0,n,i),r=function(t){var e=t.slice(1),n=[];if(3===e.length)for(var i=0;i<3;i++)n.push(Number("0x".concat(e.charAt(i).repeat(2))));else for(var s=0;s<6;s+=2)n.push(Number("0x".concat(e.slice(s,s+2))));return n}(x);this._life.draw(this.lifeRect,(function(e){var i=t.lifeToBitmap(e);s.data[i.y*n*4+4*i.x+0]=r[0],s.data[i.y*n*4+4*i.x+1]=r[1],s.data[i.y*n*4+4*i.x+2]=r[2],s.data[i.y*n*4+4*i.x+3]=255})),e.putImageData(s,0,0)}},{key:"screenshot",value:function(){var t=this._canvas.toDataURL("image/png").replace(/^data:image\/[^;]/,"data:application/octet-stream"),e=document.createElement("a");e.setAttribute("download","Life.png"),e.setAttribute("href",t),e.click()}},{key:"zoomOut",value:function(t){this._scale<this._maxScale&&(this._corner={x:2*this._corner.x-t.x,y:2*this._corner.y-t.y},this._scale++,this.drawDisplay())}},{key:"zoomIn",value:function(t){this._scale>this._minScale&&(this._corner={x:Math.floor((this._corner.x+t.x)/2),y:Math.floor((this._corner.y+t.y)/2)},this._scale--,this.drawDisplay())}},{key:"canvas",get:function(){return this._canvas}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t}},{key:"gridScale",get:function(){return this._gridScale}},{key:"corner",get:function(){return this._corner},set:function(t){this._corner=t}},{key:"life",get:function(){return this._life}},{key:"ctx",get:function(){return this._canvas.getContext("2d")}},{key:"width",get:function(){return this._canvas.width}},{key:"height",get:function(){return this._canvas.height}},{key:"pattern",set:function(t){this._life.clear(),t.add(this._life,{x:Math.floor(this._life.width/2),y:Math.floor(this._life.height/2)}),this.draw()}},{key:"scaleUp",value:function(t){return this._scale>=0?t<<this._scale:t>>-this._scale}},{key:"scaleDown",value:function(t){return this._scale>=0?t>>this._scale:t<<-this._scale}},{key:"lifeWidth",get:function(){return this.scaleUp(this._canvas.width)}},{key:"lifeHeight",get:function(){return this.scaleUp(this._canvas.height)}},{key:"lifeRect",get:function(){return new p(this._corner,this.lifeWidth,this.lifeHeight)}},{key:"lifeToBitmap",value:function(t){return{x:this.scaleDown(t.x-this._corner.x),y:this.scaleDown(this._corner.y-t.y)}}},{key:"bitmapToLife",value:function(t){return{x:this._corner.x+this.scaleUp(t.x),y:this._corner.y-this.scaleUp(t.y)}}},{key:"gridEnabled",get:function(){return this._scale<=this._gridScale}},{key:"isValidBitmapPoint",value:function(t){return 0<=t.x&&t.x<this._canvas.width&&0<=t.y&&t.y<this._canvas.height}}]),n}(y);n(21),n(22);function j(t){return Object(O.jsxs)("div",{className:"Range",children:[Object(O.jsx)(f,{onClick:function(){return t.onChange(-1)},children:Object(O.jsx)(u.b,{})}),Object(O.jsx)("span",{className:"Range_Display",children:t.value}),Object(O.jsx)(f,{onClick:function(){return t.onChange(1)},children:Object(O.jsx)(u.a,{})})]})}n(23);function D(t){return Object(O.jsx)("select",{className:"Select ".concat(t.className||""),style:t.style,onChange:t.onChange,value:t.value,children:t.children})}var M=function(t){Object(c.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).state={selectedPattern:"puffer2",speed:5},i}return Object(h.a)(n,[{key:"onPatternChange",value:function(t){if(this.state.lifeData){var e=t.target.value;this.state.lifeData.running&&this.state.lifeData.stop(),this.state.lifeData.pattern=k[e],this.setState({selectedPattern:e})}}},{key:"onToggleRunning",value:function(){this.state.lifeData&&(this.state.lifeData.running?this.state.lifeData.stop():this.state.lifeData.start(),this.forceUpdate())}},{key:"onReset",value:function(){this.state.lifeData&&(this.state.lifeData.running&&this.state.lifeData.stop(),this.state.lifeData.pattern=k[this.state.selectedPattern],this.forceUpdate())}},{key:"onStepForward",value:function(){this.state.lifeData&&!this.state.lifeData.running&&this.state.lifeData.step()}},{key:"onSpeedChange",value:function(t){if(this.state.lifeData){var e,n,i,s=(e=0,n=15,i=this.state.speed+t,Math.min(n,Math.max(e,i)));this.state.lifeData.tickTime=1e3/Math.pow(2,s),this.setState({speed:s})}}},{key:"componentDidMount",value:function(){var t=new C("lifeCanvas",1e3/Math.pow(2,this.state.speed));this.setState({lifeData:t})}},{key:"componentWillUnmount",value:function(){var t;null===(t=this.state.lifeData)||void 0===t||t.stop()}},{key:"render",value:function(){var t;return Object(O.jsxs)("div",{className:"Life",children:[Object(O.jsx)("canvas",{className:"LifeCanvas",id:"lifeCanvas"}),Object(O.jsxs)("div",{className:"LifeControls",children:[Object(O.jsx)("div",{children:Object(O.jsx)(D,{value:this.state.selectedPattern,onChange:this.onPatternChange.bind(this),children:Object.keys(k).map((function(t){return Object(O.jsx)("option",{value:t,children:t},t)}))})}),Object(O.jsxs)("div",{style:{display:"flex"},children:[Object(O.jsx)(f,{onClick:this.onReset.bind(this),children:Object(O.jsx)(u.d,{})}),Object(O.jsx)(f,{onClick:this.onToggleRunning.bind(this),children:(null===(t=this.state.lifeData)||void 0===t?void 0:t.running)?Object(O.jsx)(u.c,{}):Object(O.jsx)(u.e,{})}),Object(O.jsx)(f,{onClick:this.onStepForward.bind(this),children:Object(O.jsx)(u.f,{})})]}),Object(O.jsx)(j,{min:0,max:15,step:1,value:this.state.speed,onChange:this.onSpeedChange.bind(this)})]})]})}}]),n}(s.a.Component);var T=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(M,{})})},N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(e){var n=e.getCLS,i=e.getFID,s=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),i(t),s(t),r(t),o(t)}))};o.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(T,{})}),document.getElementById("root")),N()}],[[24,1,2]]]);
//# sourceMappingURL=main.d111613f.chunk.js.map